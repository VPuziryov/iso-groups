<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dive Community</title>
  <style>
    :root{
      --btn-bg: rgba(7,20,28,0.78);
      --btn-bg-hover: rgba(7,20,28,0.92);
      --btn-text: #eaf8ff;
      --accent: #00d1ff;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --menu-bg: rgba(0,0,0,0.75);
      --menu-border: rgba(255,255,255,0.18);
      --active-bg: #0c2432;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;
      background: url('https://i.imgur.com/LrEYePg.jpeg') center/cover no-repeat fixed;
      display:flex; align-items:center; justify-content:center;
      text-align:center; position:relative; overflow:hidden;
    }
    body::before{
      content:""; position:absolute; inset:0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.55) 20%, rgba(0,0,0,0.25) 60%, rgba(0,0,0,0.55) 100%);
      pointer-events:none;
    }

    /* language widget */
    .lang{
      position: fixed; top:14px; right:16px; z-index:5;
      display:flex; align-items:center; gap:8px;
      user-select:none;
    }
    .lang-toggle{
      padding:8px 10px; border-radius:10px;
      background: var(--btn-bg); box-shadow: var(--shadow);
      display:flex; align-items:center; gap:8px;
      cursor:pointer; border:1px solid var(--menu-border);
    }
    .lang-toggle span{font-weight:700}
    .caret{font-size:12px; opacity:.9}
    .lang-menu{
      position:absolute; top:44px; right:0;
      background: var(--menu-bg);
      border:1px solid var(--menu-border);
      border-radius:12px; box-shadow: var(--shadow);
      backdrop-filter: blur(4px);
      padding:6px; min-width:220px; display:none;
    }
    .lang.open .lang-menu{ display:block }
    .lang-grid{
      display:grid; grid-template-columns: repeat(4, 1fr); gap:6px;
    }
    .lang-btn{
      border:1px solid var(--menu-border);
      background: transparent; color:#fff;
      padding:6px 0; border-radius:8px; cursor:pointer;
      font-weight:700; letter-spacing:.3px; transition:.15s;
    }
    .lang-btn:hover{ background:rgba(255,255,255,0.12) }
    .lang-btn.active{ background: var(--active-bg); border-color: transparent; color:#cfefff }

    main{ position:relative; z-index:2; max-width:820px; padding:0 16px }
    h1{
      font-size:clamp(22px, 4vw, 36px);
      margin:0 0 10px;
      text-shadow: 0 2px 12px rgba(0,0,0,0.8);
    }
    .sub{
      font-size:clamp(14px, 2.2vw, 18px);
      color:#dbeeff; opacity:.95;
      margin:0 0 24px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.7);
    }
    .fomo{
      font-size:16px; margin-bottom:20px;
      color:#fff; opacity:.95;
      text-shadow: 0 2px 10px rgba(0,0,0,0.7);
    }
    .cta{
      display:flex; flex-direction:column; gap:14px;
      max-width:460px; margin:0 auto 16px;
    }
    .cta a{
      text-decoration:none; font-weight:800; letter-spacing:.2px;
      background: var(--btn-bg); color: var(--btn-text);
      padding:14px 18px; border-radius:12px;
      box-shadow: var(--shadow);
      transition:.2s; outline:none;
    }
    .cta a:hover, .cta a:focus{ background: var(--btn-bg-hover); color:#fff }
    .cta a span{ color: var(--accent) }
    .foot{
      margin-top:8px; font-size:14px; color:#e8f6ff; opacity:.95;
      text-shadow: 0 2px 10px rgba(0,0,0,0.7);
    }
  </style>
</head>
<body>
  <!-- Language selector -->
  <div class="lang" id="langWidget">
    <div class="lang-toggle" id="langToggle" aria-haspopup="true" aria-expanded="false" aria-label="Language">
      <div aria-hidden="true">üåê</div>
      <span id="currentLang">RU</span>
      <div class="caret">‚ñæ</div>
    </div>
    <div class="lang-menu" id="langMenu" role="menu">
      <div class="lang-grid"><!-- buttons injected --></div>
    </div>
  </div>

  <main>
    <h1 id="title"></h1>
    <p class="sub" id="subtitle"></p>
    <p class="fomo" id="fomo"></p>

    <div class="cta">
      <a id="group1" href="https://www.facebook.com/groups/dive50plus/" target="_blank" rel="noopener"></a>
      <a id="group2" href="https://www.facebook.com/groups/iscubakidsopen/" target="_blank" rel="noopener"></a>
    </div>

    <div class="foot" id="footer"></div>
  </main>

  <!-- Meta Pixel Base Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '–í–ê–®_PIXEL_ID'); 
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=–í–ê–®_PIXEL_ID&ev=PageView&noscript=1"
  /></noscript>

  <script>
    const texts = {
      ru: {title:"–°–æ–æ–±—â–µ—Å—Ç–≤–∞ –¥–∞–π–≤–µ—Ä–æ–≤ –∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –≤ Facebook", subtitle:"–û—Ç–∫—Ä—ã—Ç—ã–µ Facebook-–≥—Ä—É–ø–ø—ã –¥–ª—è –æ–±—â–µ–Ω–∏—è, —Å–æ–≤–µ—Ç–æ–≤ –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π.", fomo:"–£—á–∞—Å—Ç–Ω–∏–∫–∏ —É–∂–µ –≥–æ—Ç–æ–≤—è—Ç—Å—è –∫ –Ω–æ–≤—ã–º —Å–∞—Ñ–∞—Ä–∏ –∏ –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–≤–µ—Ç—ã –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é ‚Äî –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å!", g1:"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ Dive 50Plus", g2:"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ iScuba Kids (–î–µ—Ç–∏ –∏ –ú–æ—Ä–µ)", footer:"–ú–æ—Ä–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–æ–∫–æ–ª–µ–Ω–∏—è üåä", label:"RU"},
      en: {title:"Facebook Communities for Divers and Parents", subtitle:"Open Facebook groups for sharing experience, tips and planning adventures.", fomo:"Members are already preparing for new safaris and posting tips every week ‚Äî don‚Äôt miss out!", g1:"Join Dive 50Plus", g2:"Join iScuba Kids (Children & Sea)", footer:"The ocean unites generations üåä", label:"EN"},
      de: {title:"Facebook-Gemeinschaften f√ºr Taucher und Eltern", subtitle:"Offene Facebook-Gruppen zum Erfahrungsaustausch und zur Planung von Reisen.", fomo:"Mitglieder bereiten sich bereits auf neue Safaris vor und teilen w√∂chentlich Tipps ‚Äî verpassen Sie es nicht!", g1:"Beitreten zu Dive 50Plus", g2:"Beitreten zu iScuba Kids (Kinder & Meer)", footer:"Der Ozean verbindet Generationen üåä", label:"DE"},
      fr: {title:"Communaut√©s Facebook de plongeurs et de parents", subtitle:"Groupes Facebook ouverts pour partager, conseiller et planifier des voyages.", fomo:"Les membres pr√©parent d√©j√† de nouveaux safaris et partagent chaque semaine ‚Äî ne manquez pas l‚Äôoccasion!", g1:"Rejoindre Dive 50Plus", g2:"Rejoindre iScuba Kids (Enfants & Mer)", footer:"L‚Äôoc√©an unit les g√©n√©rations üåä", label:"FR"},
      es: {title:"Comunidades de Facebook para buceadores y padres", subtitle:"Grupos de Facebook abiertos para compartir experiencias y planificar viajes.", fomo:"Los miembros ya se est√°n preparando para nuevos safaris y comparten consejos cada semana ‚Äî ¬°no te lo pierdas!", g1:"Unirse a Dive 50Plus", g2:"Unirse a iScuba Kids (Ni√±os y Mar)", footer:"El oc√©ano une generaciones üåä", label:"ES"},
      it: {title:"Comunit√† Facebook per subacquei e genitori", subtitle:"Gruppi Facebook aperti per condividere esperienze e pianificare viaggi.", fomo:"I membri stanno gi√† preparando nuovi safari e condividono consigli ogni settimana ‚Äî non perdere l‚Äôoccasione!", g1:"Unisciti a Dive 50Plus", g2:"Unisciti a iScuba Kids (Bambini & Mare)", footer:"L‚Äôoceano unisce le generazioni üåä", label:"IT"},
      vi: {title:"C·ªông ƒë·ªìng Facebook cho th·ª£ l·∫∑n v√† ph·ª• huynh", subtitle:"C√°c nh√≥m Facebook m·ªü ƒë·ªÉ chia s·∫ª kinh nghi·ªám v√† l√™n k·∫ø ho·∫°ch h√†nh tr√¨nh.", fomo:"Th√†nh vi√™n ƒë√£ b·∫Øt ƒë·∫ßu chu·∫©n b·ªã cho c√°c chuy·∫øn safari m·ªõi v√† chia s·∫ª m·∫πo h√†ng tu·∫ßn ‚Äî ƒë·ª´ng b·ªè l·ª°!", g1:"Tham gia Dive 50Plus", g2:"Tham gia iScuba Kids (Tr·∫ª em & Bi·ªÉn)", footer:"ƒê·∫°i d∆∞∆°ng k·∫øt n·ªëi c√°c th·∫ø h·ªá üåä", label:"VI"},
      lv: {title:"Facebook kopienas nirƒìjiem un vecƒÅkiem", subtitle:"Atvƒìrtas Facebook grupas pieredzes apmai≈Üai un ceƒºojumu plƒÅno≈°anai.", fomo:"Dalƒ´bnieki jau gatavojas jaunƒÅm safari un katru nedƒìƒºu dalƒÅs ar padomiem ‚Äî nepalaid garƒÅm!", g1:"Pievienoties Dive 50Plus", g2:"Pievienoties iScuba Kids (Bƒìrni un J≈´ra)", footer:"OkeƒÅns vieno paaudzes üåä", label:"LV"}
    };

    const langOrder = ["ru","en","de","fr","es","it","vi","lv"];
    const ruCountries = ["RU","UA","BY","KZ","KG","MD","LV","LT","EE","AM","AZ","GE","UZ","TJ","TM"];
    const $ = id => document.getElementById(id);

    function render(lang){
      const t=texts[lang]||texts.en;
      $("title").innerText=t.title;
      $("subtitle").innerText=t.subtitle;
      $("fomo").innerText=t.fomo;
      $("group1").innerText=t.g1;
      $("group2").innerText=t.g2;
      $("footer").innerText=t.footer;
      document.documentElement.lang=lang;
      $("currentLang").innerText=t.label;
      document.querySelectorAll(".lang-btn").forEach(b=>b.classList.toggle("active",b.dataset.lang===lang));
      localStorage.setItem("lang",lang);
    }

    async function detectLang(){
      const saved=localStorage.getItem("lang");
      if(saved && texts[saved]) return saved;
      const nav=(navigator.language||"en").toLowerCase();
      const navCode=nav.split("-")[0];
      if(texts[navCode]) return navCode;
      try{
        const res=await fetch("https://ipapi.co/json/");
        const data=await res.json();
        if(ruCountries.includes(data.country)) return "ru";
      }catch(e){}
      return "en";
    }

    function buildLangMenu(){
      const grid=document.querySelector(".lang-grid");
      grid.innerHTML="";
      langOrder.forEach(code=>{
        const btn=document.createElement("button");
        btn.className="lang-btn";
        btn.textContent=texts[code].label;
        btn.dataset.lang=code;
        btn.addEventListener("click",()=>{
          render(code);
          $("langWidget").classList.remove("open");
          $("langToggle").setAttribute("aria-expanded","false");
        });
        grid.appendChild(btn);
      });
    }

    $("langToggle").addEventListener("click",()=>{
      const w=$("langWidget");
      const open=!w.classList.contains("open");
      w.classList.toggle("open",open);
      $("langToggle").setAttribute("aria-expanded",String(open));
    });
    document.addEventListener("click",(e)=>{
      if(!$("langWidget").contains(e.target)){
        $("langWidget").classList.remove("open");
        $("langToggle").setAttribute("aria-expanded","false");
      }
    });

    (async ()=>{ buildLangMenu(); render(await detectLang()); })();

    // --- Pixel custom events ---
    setTimeout(()=>{ fbq('trackCustom','ViewContent_groups_7s'); },7000);

    $("group1").addEventListener("click",()=>{
      fbq('trackCustom','Subscribe');
      fbq('trackCustom','click_group50plus');
    });
    $("group2").addEventListener("click",()=>{
      fbq('trackCustom','Subscribe');
      fbq('trackCustom','click_groupkids');
    });
  </script>
</body>
</html>
